<!DOCTYPE html>
<html lang="en"><head>
<script src="slides_day1_files/libs/clipboard/clipboard.min.js"></script>
<script src="slides_day1_files/libs/quarto-html/tabby.min.js"></script>
<script src="slides_day1_files/libs/quarto-html/popper.min.js"></script>
<script src="slides_day1_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="slides_day1_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="slides_day1_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="slides_day1_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.2.258">

  <meta name="author" content="Slides by Sam Rosen">
  <title>Density Graphs</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="slides_day1_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="slides_day1_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="slides_day1_files/libs/revealjs/dist/theme/quarto.css" id="theme">
  <link href="slides_day1_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="slides_day1_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="slides_day1_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="slides_day1_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="slides_day1_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="slides_day1_files/libs/revealjs/plugin/code-mover/code-mover.css" rel="stylesheet">
  <link href="slides_day1_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-captioned.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-captioned) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-captioned.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-captioned .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-captioned .callout-caption  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-captioned.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-captioned.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-caption {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-caption {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-caption {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-captioned .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-captioned .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-captioned) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-caption {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-caption {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-caption {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-caption {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-caption {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <script type="module" src="slides_day1_files/libs/quarto-ojs/quarto-ojs-runtime.js"></script>
  <link href="slides_day1_files/libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">
  <link href="slides_day1_files/libs/countdown-0.4.0/countdown.css" rel="stylesheet">
  <script src="slides_day1_files/libs/countdown-0.4.0/countdown.js"></script>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Density Graphs</h1>
  <p class="subtitle">Visualizing Full Distributions</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Slides by Sam Rosen 
</div>
</div>
</div>

</section>
<section class="slide level2">

<div class="cell">

</div>
</section>
<section id="distributions" class="slide level2 smaller">
<h2>Distributions</h2>
<p>There are many properties of a distribution of values</p>
<ul>
<li><strong>Center</strong>: Mean, Median, Modes</li>
<li><strong>Spread</strong>: Variance, Range (Support), Interquartile range</li>
<li><strong>Shape</strong>: Skewness, Kurtosis, Quantiles</li>
<li>Any statistic you can think of</li>
</ul>
<div class="fragment">
<p>Ultimately when analyzing data, the distribution is important to know how to proceed:</p>
<ul>
<li>Parametric tests</li>
<li>Erratic Data</li>
<li>Outliers</li>
</ul>
<p>So let’s visualize them!</p>
</div>
</section>
<section id="histograms" class="slide level2 smaller" data-fig-align="center">
<h2>Histograms</h2>
<div class="cell">

</div>
<p>Histogram of 1000 random numbers generated from a <span class="math inline">\(\textsf{Normal}(\mu=-1, \sigma=0.5)\)</span> and 2000 generated from a <span class="math inline">\(\textsf{Normal}(\mu=2, \sigma=0.75)\)</span>:</p>

<img data-src="slides_day1_files/figure-revealjs/unnamed-chunk-3-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="density-plots" class="slide level2 smaller">
<h2>Density Plots</h2>
<p><strong>What’s the difference?</strong></p>
<ul>
<li>Histograms are <em>counts</em> of bins of <em>observed</em> data.</li>
<li>Density plots are <em>estimates</em> of the <em>unknown</em> distribution.</li>
</ul>

<img data-src="slides_day1_files/figure-revealjs/unnamed-chunk-4-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="so-what" class="slide level2 smaller no-list-margins">
<h2>So what?</h2>
<div class="no-list-margins" style="font-size:0.75em;">
<ul>
<li><p>Histograms are sensitive to where the bins are cut</p></li>
<li><p>Histograms vary more per random sample than density plots</p></li>
<li><p>Density graphs are estimates for what a very fine histogram with lots of data would show</p></li>
</ul>
</div>
<div class="layout-sidebar layout-sidebar-left">
<div class="cell panel-sidebar">
<div class="sourceCode cell-code hidden" id="cb1" data-startfrom="97" data-source-offset="-1"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 96;"><span id="cb1-97"><a href="#cb1-97"></a>viewof binWidth <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="fl">0.01</span><span class="op">,</span> <span class="fl">1.5</span>]<span class="op">,</span> {<span class="dt">value</span><span class="op">:</span> <span class="fl">0.2</span><span class="op">,</span> <span class="dt">step</span><span class="op">:</span> <span class="fl">0.001</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"Bin Width"</span>})<span class="op">;</span></span>
<span id="cb1-98"><a href="#cb1-98"></a>viewof numPoints <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">9000</span>]<span class="op">,</span> {<span class="dt">value</span><span class="op">:</span> <span class="dv">900</span><span class="op">,</span> <span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"Number of Points"</span>})<span class="op">;</span></span>
<span id="cb1-99"><a href="#cb1-99"></a>viewof generate <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">button</span>(<span class="st">"Regenerate Data"</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-3" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="cell panel-fill">
<div class="sourceCode cell-code hidden" id="cb2" data-startfrom="104" data-source-offset="-0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 103;"><span id="cb2-104"><a href="#cb2-104"></a><span class="im">import</span> { plotNewData<span class="op">,</span> regenerateData } <span class="im">from</span> <span class="st">"./histoSampling.js"</span><span class="op">;</span></span>
<span id="cb2-105"><a href="#cb2-105"></a></span>
<span id="cb2-106"><a href="#cb2-106"></a><span class="co">// Generate does not actually get used just forces a refresh</span></span>
<span id="cb2-107"><a href="#cb2-107"></a><span class="fu">plotNewData</span>(<span class="fu">regenerateData</span>(numPoints <span class="op">/</span> <span class="dv">3</span>)<span class="op">,</span> binWidth<span class="op">,</span> generate)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-2" data-nodetype="expression">

</div>
</div>
</div>
</div>
</div>
<div class="footer">
<p>Based on <a href="https://observablehq.com/@d3/kernel-density-estimation">example</a> by Mike Bostock</p>
</div>
</section>
<section id="motivating-example" class="slide level2 smallest">
<h2>Motivating Example</h2>
<ul>
<li>Baseball! A home run in baseball occurs when a player hits a fair ball outside of the playing field. Examples:</li>
</ul>
<div style="text-align: center">
<iframe width="560" height="315" src="https://www.youtube.com/embed/nxuTG5SEHn8">
</iframe>
</div>
<ul>
<li><p>Home runs are exciting! Baseball currently has a marketing problem, but throughout history Major League Baseball (MLB, the organization running the highest level of professional baseball) has tried to change the rules to increase home runs to help the game be more entertaining.</p>
<ul>
<li>In short terms, <strong>Home runs = Money</strong>, but if everyone hits the same number of home runs they become less exciting.</li>
<li>Examining the distribution of home runs year-by-year we may be able to see the effect of rule changes.</li>
</ul></li>
</ul>
</section>
<section id="data" class="slide level2 smallest">
<h2>Data</h2>
<div>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="fu">library</span>(Lahman)</span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="fu">names</span>(Batting)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "playerID" "yearID"   "stint"    "teamID"   "lgID"     "G"       
 [7] "AB"       "R"        "H"        "X2B"      "X3B"      "HR"      
[13] "RBI"      "SB"       "CS"       "BB"       "SO"       "IBB"     
[19] "HBP"      "SH"       "SF"       "GIDP"    </code></pre>
</div>
</div>
<p>Our dataset comes from the R package <code>Lahman</code>. Each row in the data frame is the hitting stats of a player for a given year. We will mostly be using the following columns:</p>
<table>
<colgroup>
<col style="width: 36%">
<col style="width: 63%">
</colgroup>
<thead>
<tr class="header">
<th>Variable</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>yearID</code></td>
<td>The year for the statistics</td>
</tr>
<tr class="even">
<td><code>HR</code></td>
<td>The number of home runs a player hit in a given year</td>
</tr>
<tr class="odd">
<td><code>RBI</code></td>
<td>Runs batted in, the number of runs (or points) a player achieved in a given year</td>
</tr>
<tr class="even">
<td><code>SB</code></td>
<td>Stolen bases; more stolen bases = faster player</td>
</tr>
<tr class="odd">
<td><code>G</code></td>
<td>Number of games played; there are 162 games in a baseball season (154 before 1961)</td>
</tr>
<tr class="even">
<td><code>BB</code></td>
<td>Walks; more walks = defense is worried about player hitting home runs</td>
</tr>
<tr class="odd">
<td><code>SO</code></td>
<td>Strike outs; more strikeouts = Hitter is swinging recklessly</td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="data-we-will-use" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Data we will use</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb5-1" class="hljs-ln-code"><a href="#cb5-1"></a>home_runs <span class="ot">&lt;-</span> Batting</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We are interested in the distribution of the number of home runs individual players have hit per year. <sup>1</sup></p>
<aside><ol class="aside-footnotes"><li id="fn1"><p>The record for number of home runs in one year is 73, by Barry Bonds in 2001. The baseball was sold for <strong>$517,000</strong>!</p></li></ol></aside></section>
<section id="context-1" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Context 1</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb6-1" class="hljs-ln-code"><a href="#cb6-1"></a>home_runs <span class="ot">&lt;-</span> Batting <span class="sc">|&gt;</span></span>
<span id="cb6-2" class="hljs-ln-code"><a href="#cb6-2"></a>  <span class="fu">filter</span>(</span>
<span id="cb6-3" class="hljs-ln-code"><a href="#cb6-3"></a>    G <span class="sc">&gt;=</span> <span class="dv">100</span> <span class="sc">|</span></span>
<span id="cb6-4" class="hljs-ln-code"><a href="#cb6-4"></a>    (G <span class="sc">&gt;=</span> <span class="dv">40</span> <span class="sc">&amp;</span> yearID <span class="sc">==</span> <span class="dv">2020</span>) <span class="sc">|</span></span>
<span id="cb6-5" class="hljs-ln-code"><a href="#cb6-5"></a>    (G <span class="sc">&gt;=</span> <span class="dv">70</span> <span class="sc">&amp;</span> yearID <span class="sc">==</span> <span class="dv">1994</span>)</span>
<span id="cb6-6" class="hljs-ln-code"><a href="#cb6-6"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="r-fit-text">
<ul>
<li><p>There are many players in the dataset that played very little games per year, so we will limit to players that played at least 100 games in a given year, with the following years excepted:</p>
<ul>
<li><p>In 1994 only about 115 games were played due to labor strikes, so will filter to at least 70 games.</p></li>
<li><p>In 2020 COVID shortened the season to only 60 games, so we will filter at least 40 games.</p></li>
</ul></li>
</ul>
</div>
</section>
<section id="context-2" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Context 2</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb7-1" class="hljs-ln-code"><a href="#cb7-1"></a>home_runs <span class="ot">&lt;-</span> Batting <span class="sc">|&gt;</span> </span>
<span id="cb7-2" class="hljs-ln-code"><a href="#cb7-2"></a>  <span class="fu">filter</span>(</span>
<span id="cb7-3" class="hljs-ln-code"><a href="#cb7-3"></a>    G <span class="sc">&gt;=</span> <span class="dv">100</span> <span class="sc">|</span> </span>
<span id="cb7-4" class="hljs-ln-code"><a href="#cb7-4"></a>    (G <span class="sc">&gt;=</span> <span class="dv">40</span> <span class="sc">&amp;</span> yearID <span class="sc">==</span> <span class="dv">2020</span>) <span class="sc">|</span> </span>
<span id="cb7-5" class="hljs-ln-code"><a href="#cb7-5"></a>    (G <span class="sc">&gt;=</span> <span class="dv">70</span> <span class="sc">&amp;</span> yearID <span class="sc">==</span> <span class="dv">1994</span>),</span>
<span id="cb7-6" class="hljs-ln-code"><a href="#cb7-6"></a>    yearID <span class="sc">&gt;</span> <span class="dv">1920</span></span>
<span id="cb7-7" class="hljs-ln-code"><a href="#cb7-7"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>We are only concerned with years after 1920 (known as the “live-ball era”).</li>
<li>Very few home runs were hit before 1920 as the same baseball was used for the entire game. About 100 baseballs are used every game today!</li>
</ul>
</section>
<section id="context-3" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Context 3</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb8-1" class="hljs-ln-code"><a href="#cb8-1"></a>home_runs <span class="ot">&lt;-</span> Batting <span class="sc">|&gt;</span> </span>
<span id="cb8-2" class="hljs-ln-code"><a href="#cb8-2"></a>  <span class="fu">filter</span>(</span>
<span id="cb8-3" class="hljs-ln-code"><a href="#cb8-3"></a>    G <span class="sc">&gt;=</span> <span class="dv">100</span> <span class="sc">|</span> </span>
<span id="cb8-4" class="hljs-ln-code"><a href="#cb8-4"></a>    (G <span class="sc">&gt;=</span> <span class="dv">40</span> <span class="sc">&amp;</span> yearID <span class="sc">==</span> <span class="dv">2020</span>) <span class="sc">|</span> </span>
<span id="cb8-5" class="hljs-ln-code"><a href="#cb8-5"></a>    (G <span class="sc">&gt;=</span> <span class="dv">70</span> <span class="sc">&amp;</span> yearID <span class="sc">==</span> <span class="dv">1994</span>),</span>
<span id="cb8-6" class="hljs-ln-code"><a href="#cb8-6"></a>    yearID <span class="sc">&gt;</span> <span class="dv">1920</span>,</span>
<span id="cb8-7" class="hljs-ln-code"><a href="#cb8-7"></a>    lgID <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"AL"</span>, <span class="st">"NL"</span>)</span>
<span id="cb8-8" class="hljs-ln-code"><a href="#cb8-8"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>We are only considering the <code>AL</code> and <code>NL</code> leagues as they have the best stat-tracking and are the only Major leagues still around today.</li>
</ul>
</section>
<section id="density-graph-example" class="slide level2 smallest">
<h2>Density Graph Example</h2>
<div class="panel-tabset">
<ul id="tabset-1" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-1-1">Plot</a></li><li><a href="#tabset-1-2">Code</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="move-code">
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="fu">ggplot</span>(home_runs, <span class="fu">aes</span>(HR)) <span class="sc">+</span></span>
<span id="cb9-2"><a href="#cb9-2"></a>  <span class="fu">geom_density</span>() <span class="sc">+</span> </span>
<span id="cb9-3"><a href="#cb9-3"></a>  <span class="fu">xlab</span>(<span class="st">"Home runs per player per year"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img data-src="slides_day1_files/figure-revealjs/unnamed-chunk-12-1.png" width="960"></p>
</div>
</div>
<ul>
<li>Most players hit just a few home runs per year and the distribution is very right-skewed.</li>
<li>Very few players hit more than 40 per year.</li>
</ul>
</div>
<div id="tabset-1-2">

</div>
</div>
</div>
</section>
<section id="stacked-density-graph-by-decade" class="slide level2 smallest">
<h2>Stacked Density Graph By Decade</h2>
<div class="panel-tabset">
<ul id="tabset-2" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-2-1">Plot</a></li><li><a href="#tabset-2-2">Code</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="move-code">
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a>home_runs <span class="sc">|&gt;</span></span>
<span id="cb10-2"><a href="#cb10-2"></a>  <span class="fu">mutate</span>(</span>
<span id="cb10-3"><a href="#cb10-3"></a>    <span class="at">decade =</span> <span class="fu">cut</span>(</span>
<span id="cb10-4"><a href="#cb10-4"></a>      yearID, <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">1920</span>, <span class="dv">2030</span>, <span class="dv">10</span>), <span class="at">labels =</span> <span class="fu">paste0</span>(<span class="fu">seq</span>(<span class="dv">1920</span>, <span class="dv">2020</span>, <span class="dv">10</span>), <span class="st">"'s"</span>)</span>
<span id="cb10-5"><a href="#cb10-5"></a>      )</span>
<span id="cb10-6"><a href="#cb10-6"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb10-7"><a href="#cb10-7"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(HR, <span class="at">fill =</span> decade)) <span class="sc">+</span></span>
<span id="cb10-8"><a href="#cb10-8"></a>  <span class="fu">geom_density</span>(<span class="at">position =</span> <span class="st">"stack"</span>) <span class="sc">+</span></span>
<span id="cb10-9"><a href="#cb10-9"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Home runs per player per year"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img data-src="slides_day1_files/figure-revealjs/unnamed-chunk-13-1.png" width="960"></p>
</div>
</div>
<ul>
<li>If we stratify by decade, we can see the <strong>mode</strong> of the density graphs slowly creep forward, but it is difficult to see the tail of the distribution.</li>
</ul>
</div>
<div id="tabset-2-2">

</div>
</div>
</div>
</section>
<section id="overlapping-density-graphs-by-decade" class="slide level2 smallest">
<h2>Overlapping Density Graphs By Decade</h2>
<div class="panel-tabset">
<ul id="tabset-3" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-3-1">Plot</a></li><li><a href="#tabset-3-2">Code</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="move-code">
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>home_runs <span class="sc">|&gt;</span></span>
<span id="cb11-2"><a href="#cb11-2"></a>  <span class="fu">mutate</span>(</span>
<span id="cb11-3"><a href="#cb11-3"></a>    <span class="at">decade =</span> <span class="fu">cut</span>(</span>
<span id="cb11-4"><a href="#cb11-4"></a>      yearID, <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">1920</span>, <span class="dv">2030</span>, <span class="dv">10</span>), <span class="at">labels =</span> <span class="fu">paste0</span>(<span class="fu">seq</span>(<span class="dv">1920</span>, <span class="dv">2020</span>, <span class="dv">10</span>), <span class="st">"'s"</span>)</span>
<span id="cb11-5"><a href="#cb11-5"></a>      )</span>
<span id="cb11-6"><a href="#cb11-6"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb11-7"><a href="#cb11-7"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(HR, <span class="at">color =</span> decade)) <span class="sc">+</span></span>
<span id="cb11-8"><a href="#cb11-8"></a>  <span class="fu">geom_density</span>() <span class="sc">+</span></span>
<span id="cb11-9"><a href="#cb11-9"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Home runs per player per year"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img data-src="slides_day1_files/figure-revealjs/unnamed-chunk-14-1.png" width="960"></p>
</div>
</div>
<ul>
<li>The modes moving forward is a little more apparent now, but the graphs are too coupled to digest easily.</li>
</ul>
</div>
<div id="tabset-3-2">

</div>
</div>
</div>
</section>
<section id="stacked-density-graph-with-conditional-probabilities" class="slide level2 smallest">
<h2>Stacked Density Graph with Conditional Probabilities</h2>
<div class="panel-tabset">
<ul id="tabset-4" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-4-1">Plot</a></li><li><a href="#tabset-4-2">Code</a></li></ul>
<div class="tab-content">
<div id="tabset-4-1" class="move-code">
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>home_runs <span class="sc">|&gt;</span></span>
<span id="cb12-2"><a href="#cb12-2"></a>  <span class="fu">mutate</span>(</span>
<span id="cb12-3"><a href="#cb12-3"></a>    <span class="at">decade =</span> <span class="fu">cut</span>(</span>
<span id="cb12-4"><a href="#cb12-4"></a>      yearID, <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">1920</span>, <span class="dv">2030</span>, <span class="dv">10</span>), <span class="at">labels =</span> <span class="fu">paste0</span>(<span class="fu">seq</span>(<span class="dv">1920</span>, <span class="dv">2020</span>, <span class="dv">10</span>), <span class="st">"'s"</span>)</span>
<span id="cb12-5"><a href="#cb12-5"></a>      )</span>
<span id="cb12-6"><a href="#cb12-6"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb12-7"><a href="#cb12-7"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> HR, <span class="at">y =</span> <span class="fu">after_stat</span>(count), <span class="at">fill =</span> decade)) <span class="sc">+</span></span>
<span id="cb12-8"><a href="#cb12-8"></a>  <span class="fu">geom_density</span>(<span class="at">position =</span> <span class="st">"fill"</span>) <span class="sc">+</span></span>
<span id="cb12-9"><a href="#cb12-9"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">60</span>, <span class="at">linetype =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb12-10"><a href="#cb12-10"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Home runs per player per year"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img data-src="slides_day1_files/figure-revealjs/unnamed-chunk-15-1.png" width="960"></p>
</div>
</div>
<ul>
<li>By using <code>position="fill"</code> and <code>y=after_stat(count)</code> we graph the conditional probability that of a decade given a player has hit a certain number of home runs.</li>
<li>We see that players would hit about 60 homeruns in the 20’s and 30’s, but that disappears until the 90’s and 2000’s <sup>1</sup> which quickly take up the conditional probability for years with more than 60 home runs. What happened?</li>
</ul>
</div>
<div id="tabset-4-2">

</div>
</div>
</div>
<aside><ol class="aside-footnotes"><li id="fn2"><p>With the exception of 1961, the year Roger Maris hit 61 home runs.</p></li></ol></aside></section>
<section id="violin-plot" class="slide level2 smallest">
<h2>Violin Plot</h2>
<div class="panel-tabset">
<ul id="tabset-5" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-5-1">Plot</a></li><li><a href="#tabset-5-2">Code</a></li></ul>
<div class="tab-content">
<div id="tabset-5-1" class="move-code">
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>home_runs <span class="sc">|&gt;</span></span>
<span id="cb13-2"><a href="#cb13-2"></a>  <span class="fu">filter</span>(yearID <span class="sc">%in%</span> <span class="dv">1985</span><span class="sc">:</span><span class="dv">2005</span>) <span class="sc">|&gt;</span></span>
<span id="cb13-3"><a href="#cb13-3"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(HR, <span class="at">x =</span> <span class="fu">factor</span>(yearID))) <span class="sc">+</span></span>
<span id="cb13-4"><a href="#cb13-4"></a>  <span class="fu">geom_violin</span>(<span class="at">draw_quantiles =</span> <span class="fu">c</span>(<span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>)) <span class="sc">+</span></span>
<span id="cb13-5"><a href="#cb13-5"></a>  <span class="fu">geom_jitter</span>(</span>
<span id="cb13-6"><a href="#cb13-6"></a>    <span class="at">data =</span> <span class="sc">~</span> <span class="fu">filter</span>(.x, HR <span class="sc">&gt;=</span> <span class="dv">30</span>),</span>
<span id="cb13-7"><a href="#cb13-7"></a>    <span class="at">height =</span> <span class="dv">0</span>,</span>
<span id="cb13-8"><a href="#cb13-8"></a>    <span class="at">width =</span> <span class="fl">0.1</span>,</span>
<span id="cb13-9"><a href="#cb13-9"></a>    <span class="at">alpha =</span> <span class="fl">0.5</span></span>
<span id="cb13-10"><a href="#cb13-10"></a>  ) <span class="sc">+</span></span>
<span id="cb13-11"><a href="#cb13-11"></a>  <span class="fu">xlab</span>(<span class="st">"Home runs per player per year"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img data-src="slides_day1_files/figure-revealjs/unnamed-chunk-16-1.png" width="960"></p>
</div>
</div>
<ul>
<li>Let’s examine the years near the change point, 1985 to 2005. All points shown are players that hit 30 or more homeruns in a given year. It looks like around 1995 players started hitting <strong>a lot</strong> more home runs.</li>
</ul>
</div>
<div id="tabset-5-2">

</div>
</div>
</div>
</section>
<section id="ridge-plot" class="slide level2 smallest">
<h2>Ridge Plot</h2>
<div class="panel-tabset">
<ul id="tabset-6" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-6-1">Plot</a></li><li><a href="#tabset-6-2">Code</a></li></ul>
<div class="tab-content">
<div id="tabset-6-1" class="move-code">
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a><span class="fu">library</span>(ggridges)</span>
<span id="cb14-2"><a href="#cb14-2"></a></span>
<span id="cb14-3"><a href="#cb14-3"></a>home_runs <span class="sc">|&gt;</span></span>
<span id="cb14-4"><a href="#cb14-4"></a>  <span class="fu">filter</span>(yearID <span class="sc">%in%</span> <span class="dv">1985</span><span class="sc">:</span><span class="dv">2010</span>) <span class="sc">|&gt;</span></span>
<span id="cb14-5"><a href="#cb14-5"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> HR,</span>
<span id="cb14-6"><a href="#cb14-6"></a>             <span class="at">y =</span> <span class="fu">factor</span>(yearID))) <span class="sc">+</span></span>
<span id="cb14-7"><a href="#cb14-7"></a>  <span class="fu">stat_density_ridges</span>(</span>
<span id="cb14-8"><a href="#cb14-8"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">fill =</span> <span class="fu">factor</span>(<span class="fu">stat</span>(quantile))),</span>
<span id="cb14-9"><a href="#cb14-9"></a>    <span class="at">geom =</span> <span class="st">"density_ridges_gradient"</span>,</span>
<span id="cb14-10"><a href="#cb14-10"></a>    <span class="at">calc_ecdf =</span> <span class="cn">TRUE</span>,</span>
<span id="cb14-11"><a href="#cb14-11"></a>    <span class="at">quantiles =</span> <span class="fu">c</span>(.<span class="dv">25</span>, .<span class="dv">50</span>, .<span class="dv">75</span>, .<span class="dv">95</span>),</span>
<span id="cb14-12"><a href="#cb14-12"></a>    <span class="at">quantile_lines =</span> <span class="cn">TRUE</span>,</span>
<span id="cb14-13"><a href="#cb14-13"></a>    <span class="at">scale =</span> <span class="dv">2</span>,</span>
<span id="cb14-14"><a href="#cb14-14"></a>    <span class="at">rel_min_height =</span> <span class="fl">0.01</span></span>
<span id="cb14-15"><a href="#cb14-15"></a>  ) <span class="sc">+</span></span>
<span id="cb14-16"><a href="#cb14-16"></a>  <span class="fu">scale_fill_viridis_d</span>(<span class="at">name =</span> <span class="st">"Quantiles"</span>,</span>
<span id="cb14-17"><a href="#cb14-17"></a>                       <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"0"</span>, <span class="st">"25th"</span>, <span class="st">"50th"</span>, <span class="st">"75th"</span>, <span class="st">"95th"</span>)) <span class="sc">+</span></span>
<span id="cb14-18"><a href="#cb14-18"></a>  <span class="fu">geom_jitter</span>(</span>
<span id="cb14-19"><a href="#cb14-19"></a>    <span class="at">data =</span> <span class="sc">~</span> <span class="fu">filter</span>(.x, HR <span class="sc">&gt;=</span> <span class="dv">30</span>),</span>
<span id="cb14-20"><a href="#cb14-20"></a>    <span class="at">height =</span> <span class="fl">0.2</span>,</span>
<span id="cb14-21"><a href="#cb14-21"></a>    <span class="at">width =</span> <span class="dv">0</span>,</span>
<span id="cb14-22"><a href="#cb14-22"></a>    <span class="at">alpha =</span> <span class="fl">0.3</span>,</span>
<span id="cb14-23"><a href="#cb14-23"></a>  ) <span class="sc">+</span></span>
<span id="cb14-24"><a href="#cb14-24"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">name =</span> <span class="st">"Home runs per player per year"</span>, <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">73</span>)) <span class="sc">+</span></span>
<span id="cb14-25"><a href="#cb14-25"></a>  <span class="fu">ylab</span>(<span class="st">"Year"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img data-src="slides_day1_files/figure-revealjs/unnamed-chunk-17-1.png" width="960"></p>
</div>
</div>
<ul>
<li>The quantiles also have a consistent increase, along with many more players hitting 30 or more home runs!</li>
<li>In 1998 there was a home run record race between two players; this brought a lot of interest back into baseball.</li>
<li>1995 to about 2005 is known as the <em>Steroid Era</em> in baseball. During this time, players would take performance enhancing drugs freely as the league did not enforce the ban on them. League-wide testing began in 2003.</li>
</ul>
</div>
<div id="tabset-6-2">

</div>
</div>
</div>
</section>
<section id="application-exercise" class="slide level2">
<h2>Application exercise</h2>
<ul>
<li>Go to [ADD REPO NAME]</li>
<li>Work on exercise [ADD EXERCISE NUMBER OF TITLE]</li>
</ul>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="timer_d83ac92f" data-update-every="1" tabindex="0" style="right:0;bottom:0;">
<div class="countdown-controls"><button class="countdown-bump-down">−</button><button class="countdown-bump-up">+</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">10</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
</section>
<section id="bandwidth" class="slide level2 smaller">
<h2>Bandwidth</h2>
<p>Density graphs are sensitive to <strong>bandwidth</strong>, but this is a continuous degradation of performance.</p>
<div class="layout-sidebar layout-sidebar-left">
<div class="cell panel-sidebar">
<div class="sourceCode cell-code hidden" id="cb15" data-startfrom="412" data-source-offset="-1"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 411;"><span id="cb15-412"><a href="#cb15-412"></a>viewof binWidth2 <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="fl">0.01</span><span class="op">,</span> <span class="fl">1.5</span>]<span class="op">,</span> {<span class="dt">value</span><span class="op">:</span> <span class="fl">0.2</span><span class="op">,</span> <span class="dt">step</span><span class="op">:</span> <span class="fl">0.001</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"Bin Width"</span>})<span class="op">;</span></span>
<span id="cb15-413"><a href="#cb15-413"></a>viewof bandwidth <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="fl">0.01</span><span class="op">,</span> <span class="dv">2</span>]<span class="op">,</span> {<span class="dt">value</span><span class="op">:</span> <span class="fl">0.2</span><span class="op">,</span> <span class="dt">step</span><span class="op">:</span> <span class="fl">0.001</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"Bandwidth"</span>})<span class="op">;</span></span>
<span id="cb15-414"><a href="#cb15-414"></a>viewof numPoints2 <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">9000</span>]<span class="op">,</span> {<span class="dt">value</span><span class="op">:</span> <span class="dv">900</span><span class="op">,</span> <span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"Number of Points"</span>})<span class="op">;</span></span>
<span id="cb15-415"><a href="#cb15-415"></a>viewof generate2 <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">button</span>(<span class="st">"Regenerate Data"</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-3-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-3-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-3-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-3-4" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="cell panel-fill">
<div class="sourceCode cell-code hidden" id="cb16" data-startfrom="420" data-source-offset="-0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 419;"><span id="cb16-420"><a href="#cb16-420"></a><span class="im">import</span> { plotNewDataBW } <span class="im">from</span> <span class="st">"./bandwidthSampling.js"</span><span class="op">;</span></span>
<span id="cb16-421"><a href="#cb16-421"></a></span>
<span id="cb16-422"><a href="#cb16-422"></a><span class="co">// Generate does not actually get used just forces a refresh</span></span>
<span id="cb16-423"><a href="#cb16-423"></a><span class="fu">plotNewDataBW</span>(<span class="fu">regenerateData</span>(numPoints2 <span class="op">/</span> <span class="dv">3</span>)<span class="op">,</span> binWidth2<span class="op">,</span> bandwidth<span class="op">,</span> generate2)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-4-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-4-2" data-nodetype="expression">

</div>
</div>
</div>
</div>
</div>
</section>
<section id="automatic-bandwidth-selection" class="slide level2 smallest">
<h2>Automatic Bandwidth Selection</h2>
<ul>
<li><p>Because change in bandwidth leads to a continuous change in the density estimate, it is often easier to automatically pick a bandwidth!</p></li>
<li><p>Silverman’s ‘rule-of-thumb’ <code>bw.nrd0</code> :</p>
<p><span class="math display">\[
\begin{align*}
  h = 0.9 * n^{-1/5} \min(s, IQR/1.34)
\end{align*}
\]</span></p>
<ul>
<li>One of the most optimal bandwidth selectors <strong>if</strong> your data comes from a normal distribution</li>
<li>Default in <code>ggplot2</code> and <code>R</code></li>
</ul></li>
</ul>
<div class="fragment">
<ul>
<li><p>Sheather-Jones <code>bw.SJ</code></p>
<ul>
<li><p>More complicated bandwidth selector that “would rather fit” as the default</p></li>
<li><p>Less likely to give over-smoothed density graphs</p></li>
<li><p><code>geom_density(bw = "SJ")</code> to use</p></li>
</ul></li>
</ul>
</div>
<div class="fragment">
<ul>
<li><p>Other methods</p>
<ul>
<li><p>Scott’s plug in estimator <code>bw.nrd</code>: similar to Silverman’s</p></li>
<li><p><code>bw.ucv</code> and <code>bw.bcv</code>: cross validation based methods that are less useful for data visualization</p></li>
<li><p><code>bw.SJ(&lt;data&gt;, method = "dpi")</code>: An easier to calculate Sheather-Jones estimate that gives worse results</p></li>
</ul></li>
</ul>
</div>
</section>
<section id="sheather-jones-example" class="slide level2">
<h2>Sheather Jones Example</h2>
<div class="panel-tabset">
<ul id="tabset-7" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-7-1">Useful</a></li><li><a href="#tabset-7-2">Not useful?</a></li></ul>
<div class="tab-content">
<div id="tabset-7-1">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="slides_day1_files/figure-revealjs/unnamed-chunk-21-1.png" width="960"></p>
</div>
</div>
</div>
<div id="tabset-7-2" class="smallest">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="slides_day1_files/figure-revealjs/unnamed-chunk-22-1.png" width="960"></p>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="kernel-density-estimates-advanced" class="slide level2 smallest">
<h2>Kernel Density Estimates (Advanced)</h2>
<ul>
<li>Density graphs are illustrations of Kernel Density Estimates:</li>
</ul>
<p><span class="math display">\[
\begin{align*}
\hat{f}_h(x) &amp; = \frac{1}{nh} \sum_{i=1}^n K\left(\frac{x - x_i}{h}\right)
\end{align*}
\]</span></p>
<ul>
<li><p><span class="math inline">\(x_i\)</span> is the <span class="math inline">\(i^{th}\)</span> data point</p></li>
<li><p><span class="math inline">\(h\)</span> is the bandwidth of the Kernel</p></li>
<li><p><span class="math inline">\(K\)</span> is the Kernel</p>
<ul>
<li><span class="math inline">\(K\)</span> can be a number of functions (see <code>kernel</code> option from <code>?density</code> or <a href="https://en.wikipedia.org/wiki/Kernel_(statistics)#Kernel_functions_in_common_use">Wikipedia</a>) but is usually the Gaussian kernel: <span class="math inline">\(K(x) = \frac{1}{\sqrt{2\pi}} \exp\left(-\frac{x^2}{2}\right)\)</span>.</li>
<li>Choice of <span class="math inline">\(K\)</span> will give different looking density graphs, but choice of bandwidth is <strong>a lot</strong> more important than choice of Kernel. The Gaussian Kernel is by far the most used.</li>
<li>To see examples of Kernel choices, see this <a href="https://shinyserv.es/shiny/kde/">shiny app</a> by Eduardo García-Portugués.</li>
</ul></li>
</ul>
<div class="footer" style="font-size: 0.5em;">
<p>To learn more, see <a href="https://bookdown.org/egarpor/NP-UC3M/kde-i-kde.html">Chapter 2</a> of <em>Nonparametric Statistics</em> by Eduardo García-Portugués.</p>
</div>
</section>
<section id="application-exercise-1" class="slide level2">
<h2>Application exercise</h2>
<ul>
<li>Go to [ADD REPO NAME]</li>
<li>Work on exercise [ADD EXERCISE NUMBER OF TITLE]</li>
</ul>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="timer_a4d13c8c" data-update-every="1" tabindex="0" style="right:0;bottom:0;">
<div class="countdown-controls"><button class="countdown-bump-down">−</button><button class="countdown-bump-up">+</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">05</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
</section>
<section id="cautions" class="slide level2 smallest">
<h2>Cautions</h2>
<div class="panel-tabset">
<ul id="tabset-8" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-8-1">Density Below 0</a></li><li><a href="#tabset-8-2">Long Tailed Data</a></li></ul>
<div class="tab-content">
<div id="tabset-8-1">
<div class="cell">
<div class="sourceCode cell-code" id="cb17" data-code-line-numbers="false"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>long_tailed_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">random_values =</span> <span class="fu">rlnorm</span>(<span class="dv">1000</span>, <span class="sc">-</span><span class="dv">3</span>, <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="columns">
<div class="column" style="width:49%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a><span class="co"># Base R plotting</span></span>
<span id="cb18-2"><a href="#cb18-2"></a><span class="fu">plot</span>(</span>
<span id="cb18-3"><a href="#cb18-3"></a>  <span class="fu">density</span>(long_tailed_data<span class="sc">$</span>random_values, <span class="at">bw =</span> <span class="st">"SJ"</span>), </span>
<span id="cb18-4"><a href="#cb18-4"></a>  <span class="at">main =</span> <span class="st">"Density graph of positive numbers with density below 0"</span></span>
<span id="cb18-5"><a href="#cb18-5"></a>) </span>
<span id="cb18-6"><a href="#cb18-6"></a><span class="fu">abline</span>(<span class="at">v =</span> <span class="dv">0</span>, <span class="at">col=</span><span class="st">"red"</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img data-src="slides_day1_files/figure-revealjs/unnamed-chunk-25-1.png" width="960"></p>
</div>
</div>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:49%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a><span class="fu">plot</span>(</span>
<span id="cb19-2"><a href="#cb19-2"></a>  <span class="fu">density</span>(long_tailed_data<span class="sc">$</span>random_values, <span class="at">bw =</span> <span class="st">"SJ"</span>, <span class="at">from =</span> <span class="dv">0</span>),</span>
<span id="cb19-3"><a href="#cb19-3"></a>  <span class="at">main=</span><span class="st">"Density graph of positive numbers with cut density"</span></span>
<span id="cb19-4"><a href="#cb19-4"></a>)</span>
<span id="cb19-5"><a href="#cb19-5"></a><span class="fu">abline</span>(<span class="at">v =</span> <span class="dv">0</span>, <span class="at">col=</span><span class="st">"red"</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img data-src="slides_day1_files/figure-revealjs/unnamed-chunk-26-1.png" width="960"></p>
</div>
</div>
</div>
</div>
<ul>
<li><code>ggplot2</code> generally handles this for you by putting bounds at the range of your data, but it can occasionally skip this depending on how complicated your graph becomes.</li>
</ul>
</div>
<div id="tabset-8-2">
<div class="cell">
<div class="sourceCode cell-code" id="cb20" data-code-line-numbers="false"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>longer_tailed_data <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">random_values =</span> <span class="fu">rlnorm</span>(<span class="dv">1000</span>, <span class="sc">-</span><span class="dv">6</span>, <span class="dv">5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="columns">
<div class="column" style="width:49%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a><span class="fu">ggplot</span>(longer_tailed_data, <span class="fu">aes</span>(<span class="at">x =</span> random_values)) <span class="sc">+</span></span>
<span id="cb21-2"><a href="#cb21-2"></a>  <span class="fu">geom_density</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img data-src="slides_day1_files/figure-revealjs/unnamed-chunk-28-1.png" width="960"></p>
</div>
</div>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:49%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a><span class="fu">ggplot</span>(longer_tailed_data, <span class="fu">aes</span>(<span class="at">x =</span> random_values)) <span class="sc">+</span></span>
<span id="cb22-2"><a href="#cb22-2"></a>  <span class="fu">geom_density</span>() <span class="sc">+</span></span>
<span id="cb22-3"><a href="#cb22-3"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">trans =</span> <span class="st">"log"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img data-src="slides_day1_files/figure-revealjs/unnamed-chunk-29-1.png" width="960"></p>
</div>
</div>
</div>
</div>
<ul>
<li>This occurs in practice quite often!</li>
</ul>
</div>
</div>
</div>
</section>
<section id="d-density" class="slide level2 smallest">
<h2>2D Density</h2>
<div class="panel-tabset">
<ul id="tabset-9" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-9-1">Plot</a></li><li><a href="#tabset-9-2">Code</a></li><li><a href="#tabset-9-3">Scatter plot</a></li></ul>
<div class="tab-content">
<div id="tabset-9-1" class="move-code">
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a>home_runs <span class="sc">|&gt;</span></span>
<span id="cb23-2"><a href="#cb23-2"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> HR, <span class="at">y =</span> SO <span class="sc">+</span> BB)) <span class="sc">+</span></span>
<span id="cb23-3"><a href="#cb23-3"></a>  <span class="fu">geom_density_2d_filled</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb23-4"><a href="#cb23-4"></a>  <span class="fu">geom_density_2d</span>() <span class="sc">+</span></span>
<span id="cb23-5"><a href="#cb23-5"></a>  <span class="fu">labs</span>(</span>
<span id="cb23-6"><a href="#cb23-6"></a>    <span class="at">x =</span> <span class="st">"Home runs per player per year"</span>,</span>
<span id="cb23-7"><a href="#cb23-7"></a>    <span class="at">y =</span> <span class="st">"Strike outs and walks per player per year"</span></span>
<span id="cb23-8"><a href="#cb23-8"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img data-src="slides_day1_files/figure-revealjs/unnamed-chunk-30-1.png" width="960"></p>
</div>
</div>
<ul>
<li>Players that hit lots of home runs tend to strikeout and walk more.</li>
</ul>
</div>
<div id="tabset-9-2">

</div>
<div id="tabset-9-3">
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a>home_runs <span class="sc">|&gt;</span></span>
<span id="cb24-2"><a href="#cb24-2"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> HR, <span class="at">y =</span> SO <span class="sc">+</span> BB)) <span class="sc">+</span></span>
<span id="cb24-3"><a href="#cb24-3"></a>  <span class="fu">geom_jitter</span>(<span class="at">width =</span> <span class="fl">0.3</span>, <span class="at">height =</span> <span class="fl">0.3</span>, <span class="at">alpha =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb24-4"><a href="#cb24-4"></a>  <span class="fu">geom_density_2d</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb24-5"><a href="#cb24-5"></a>  <span class="fu">labs</span>(</span>
<span id="cb24-6"><a href="#cb24-6"></a>    <span class="at">x =</span> <span class="st">"Home runs per player per year"</span>,</span>
<span id="cb24-7"><a href="#cb24-7"></a>    <span class="at">y =</span> <span class="st">"Strike outs and walks per player per year"</span></span>
<span id="cb24-8"><a href="#cb24-8"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img data-src="slides_day1_files/figure-revealjs/unnamed-chunk-31-1.png" width="960"></p>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="density-graphs-summary" class="slide level2 smaller">
<h2>Density Graphs Summary</h2>
<p>Pros:</p>
<ul>
<li><strong>Visualize entire distribution</strong></li>
<li>Mean, median, variance, outliers, support, skewness, normality etc.</li>
<li><code>plot(density(Batting$HR))</code> is usually the first thing I do when analyzing data</li>
</ul>
<p>Cons:</p>
<ul>
<li>Sensitive to bandwidth choices</li>
<li>Harder to communicate to non-statisticians</li>
<li>Difficult to build yourself (use libraries!)</li>
</ul>
<div class="footer footer-default">

</div>
</section>

    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="slides_day1_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="slides_day1_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="slides_day1_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="slides_day1_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="slides_day1_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="slides_day1_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="slides_day1_files/libs/revealjs/plugin/code-mover/code-mover.js"></script>
  <script src="slides_day1_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="slides_day1_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="slides_day1_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="slides_day1_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="slides_day1_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': true,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":false},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, CodeMover, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script type="ojs-module-contents">
    {"contents":[{"methodName":"interpret","cellName":"ojs-cell-1","inline":false,"source":"\nviewof binWidth = Inputs.range([0.01, 1.5], {value: 0.2, step: 0.001, label: \"Bin Width\"});\nviewof numPoints = Inputs.range([0, 9000], {value: 900, step: 1, label: \"Number of Points\"});\nviewof generate = Inputs.button(\"Regenerate Data\");\n"},{"methodName":"interpret","cellName":"ojs-cell-2","inline":false,"source":"import { plotNewData, regenerateData } from \"./histoSampling.js\";\n\n// Generate does not actually get used just forces a refresh\nplotNewData(regenerateData(numPoints / 3), binWidth, generate);\n"},{"methodName":"interpret","cellName":"ojs-cell-3","inline":false,"source":"\nviewof binWidth2 = Inputs.range([0.01, 1.5], {value: 0.2, step: 0.001, label: \"Bin Width\"});\nviewof bandwidth = Inputs.range([0.01, 2], {value: 0.2, step: 0.001, label: \"Bandwidth\"});\nviewof numPoints2 = Inputs.range([0, 9000], {value: 900, step: 1, label: \"Number of Points\"});\nviewof generate2 = Inputs.button(\"Regenerate Data\");\n"},{"methodName":"interpret","cellName":"ojs-cell-4","inline":false,"source":"import { plotNewDataBW } from \"./bandwidthSampling.js\";\n\n// Generate does not actually get used just forces a refresh\nplotNewDataBW(regenerateData(numPoints2 / 3), binWidth2, bandwidth, generate2);\n"},{"methodName":"interpretQuiet","source":"shinyInput('binWidth')"},{"methodName":"interpretQuiet","source":"shinyInput('numPoints')"},{"methodName":"interpretQuiet","source":"shinyInput('generate')"},{"methodName":"interpretQuiet","source":"shinyInput('binWidth2')"},{"methodName":"interpretQuiet","source":"shinyInput('bandwidth')"},{"methodName":"interpretQuiet","source":"shinyInput('numPoints2')"},{"methodName":"interpretQuiet","source":"shinyInput('generate2')"}]}
    </script>
    <script type="module">
    window._ojs.paths.runtimeToDoc = "../../..";
    window._ojs.paths.runtimeToRoot = "../../..";
    window._ojs.paths.docToRoot = "";
    window._ojs.selfContained = false;
    window._ojs.runtime.interpretFromScriptTags();
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        target: function(trigger) {
          return trigger.previousElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto-reveal',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>